.. _`POST BuildDocument`: https://developer.kontur.ru/doc/extern/method?type=post&path=%2Fv1%2F%7BaccountId%7D%2Fdrafts%2F%7BdraftId%7D%2Fdocuments%2F%7BdocumentId%7D%2Fbuild
.. _`POST BuildDocumentContent`: https://developer.kontur.ru/doc/extern/method?type=post&path=%2Fv1%2F%7BaccountId%7D%2Fdrafts%2F%7BdraftId%7D%2Fbuild-document


Методы генерации файлов отчетов в черновике
===========================================

Список доступных методов:

* `Создание файла в документе по контракту (УСН)`_
* `Создание и замена документа по контракту (УСН)`_

Некоторые формализованные документы для ФНС можно создать прямо в черновике, а не загружать уже готовые. По :doc:`контрактам</manuals/contracts>` методы данного раздела формируют документы в черновике. Контракт указывает на тип и формат документа, а также содержит информацию, которая будет передана в ФНС. Для декларации по упрощенной системе налогообложения по ставке 6% или 15%, ставка определяется по версии контракта.

Согласно :doc:`порядку работы с черновиками</drafts/порядок работы с черновиками>`, методы нужно использовать на шаге наполнения черновика. После создания файла установленного формата в документе черновика нужно добавить подпись к файлу или подписать весь черновик DSS сертификатом. В результате отправки черновика для декларации УСН будет создан документооборот с типом urn:docflow:fns534-report.

Создание файла в документе по контракту (УСН)
---------------------------------------------

Метод: `POST BuildDocument`_

Данный метод позволяет создать файл установленного формата в указанном документе черновика.  

**Описание параметров метода:**

    * В параметре type необходимо указать тип документа (USN). 
    * Параметр version означает версию контракта. 
    
        - Для УСН принимает значение 1 или 2.
    
**В теле запроса** необходимо передать :doc:`контракт</manuals/contracts>` в формате валидного JSON. 

На основании переданного контракта будет сформирован файл отчета. Если файл успешно создан, его контент появится в документе черновика, а метод вернет пустой ответ 200.

Метод можно использовать после создания черновика и пустого документа в нем. В результате вызова метода в документе появится контент файла установленного формата. 

Создание и замена документа по контракту (УСН)
----------------------------------------------

Метод: `POST BuildDocumentContent`_

С помощью этого метода можно создать документ в черновике, который будет содержать контент файла установленного формата. 

**Описание параметров метода:**

    * В параметре type необходимо указать тип документа (USN). 
    * Параметр version означает версию контракта. 
    
        - Для УСН принимает значение 1 или 2. 
    
**В теле запроса** необходимо передать :doc:`контракт</manuals/contracts>` в формате валидного JSON. 

Если файл успешно создан, метод вернет ответ 200 и сформированный в черновике документ.
